{"ast":null,"code":"import _objectSpread from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/src/components/UserManagement/Dialogs/EditDialog.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Field, reduxForm } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport DialogComponent from \"../../HelperComponents/DialogComponent/DialogComponent\";\nimport FormControl from '@material-ui/core/FormControl';\nimport SelectComponent from '../../HelperComponents/SelectComponent/SelectComponent';\nimport RenderField from \"../../HelperComponents/RenderField/RenderField\";\nimport { patchUser, getUsersList, resetErrorUsers } from \"../../../actions/UserActions\";\n\nvar EditDialog = /*#__PURE__*/function (_Component) {\n  _inherits(EditDialog, _Component);\n\n  function EditDialog() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditDialog)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      role: [{\n        label: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"status\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 29\n          }\n        }, \"Admin\")),\n        value: \"admin\"\n      }, {\n        label: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"status\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 29\n          }\n        }, \"User\")),\n        value: \"user\"\n      }],\n      noErrors: false\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        // const status = { status: event.value }\n        _this.setState(_defineProperty({}, name, event));\n      };\n    };\n\n    _this.submitForm = function (data) {\n      var _this$props = _this.props,\n          patchUser = _this$props.patchUser,\n          getUsersList = _this$props.getUsersList,\n          toggler = _this$props.toggler,\n          initialValues = _this$props.initialValues;\n      var status = _this.state.status;\n\n      var obj = _objectSpread({}, data, {\n        role: status.value\n      });\n\n      patchUser(initialValues.id, obj).then(function (res) {\n        if (res.payload && res.payload.status && res.payload.status === 200) {\n          getUsersList();\n          toggler();\n        }\n      });\n    };\n\n    _this.defaultStatus = function () {\n      _this.setState({\n        status: null,\n        noErrors: true\n      });\n\n      _this.props.resetErrorUsers();\n    };\n\n    return _this;\n  }\n\n  _createClass(EditDialog, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          role = _this$state.role,\n          status = _this$state.status;\n      var _this$props2 = this.props,\n          toggler = _this$props2.toggler,\n          state = _this$props2.state,\n          handleSubmit = _this$props2.handleSubmit,\n          fail_err = _this$props2.fail_err,\n          initialValues = _this$props2.initialValues,\n          reset = _this$props2.reset;\n      return /*#__PURE__*/React.createElement(DialogComponent, {\n        open: state,\n        onClose: function onClose() {\n          toggler();\n\n          _this2.defaultStatus();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"edit_dialog_user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit(this.submitForm),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 29\n        }\n      }, \"Edit user\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block_edit_field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"span\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(Field, {\n        name: \"username\",\n        type: \"text\",\n        component: RenderField,\n        placeholder: \"Type here\\u2026\",\n        className: \"input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block_edit_field_select\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 33\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(Field, {\n        name: \"email\",\n        type: \"text\",\n        component: RenderField,\n        placeholder: \"Type here\\u2026\",\n        className: \"input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"back_error add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 33\n        }\n      }, !!fail_err && fail_err.email)), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }\n      }, \"Role\"), /*#__PURE__*/React.createElement(FormControl, {\n        className: \"select_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(SelectComponent, {\n        value: status,\n        options: role // loading={!isArray(projects_list)}\n        ,\n        change: this.handleChange('status'),\n        isClearable: \"false\",\n        isSearchable: false,\n        onKeyDown: function onKeyDown(e) {\n          return e.keyCode === 13 ? e.preventDefault() : false;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"back_error role\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 33\n        }\n      }, !!fail_err && fail_err.role))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"cancel_btn\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          toggler();\n          reset('EditDialog');\n\n          _this2.defaultStatus();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"blue_btn\",\n        disabled: !status,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }\n      }, \"save\")))));\n    }\n  }]);\n\n  return EditDialog;\n}(Component);\n\nexport var validate = function validate(values) {\n  var errors = {};\n  var regExp = new RegExp(/^([A-Za-z '.-]+){1}$/g);\n\n  if (!values.username) {\n    errors.username = 'Required';\n  } else if (!regExp.test(values.username)) {\n    errors.username = 'Invalid name';\n  }\n\n  if (!values.email) {\n    errors.email = 'Required';\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,5}$/i.test(values.email)) {\n    errors.email = 'Invalid email';\n  }\n\n  return errors;\n};\nEditDialog = reduxForm({\n  form: 'EditDialog',\n  validate: validate,\n  enableReinitialize: true\n})(EditDialog);\n\nfunction mapStateToProps(state, props) {\n  return {\n    fail_err: state.users.error // initialValues: {\n    //     email: (props.userData && props.userData.email) || ''\n    // }\n\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    patchUser: patchUser,\n    getUsersList: getUsersList,\n    resetErrorUsers: resetErrorUsers\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditDialog);","map":{"version":3,"sources":["/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/src/components/UserManagement/Dialogs/EditDialog.jsx"],"names":["React","Component","connect","Field","reduxForm","bindActionCreators","DialogComponent","FormControl","SelectComponent","RenderField","patchUser","getUsersList","resetErrorUsers","EditDialog","state","role","label","value","noErrors","handleChange","name","event","setState","submitForm","data","props","toggler","initialValues","status","obj","id","then","res","payload","defaultStatus","handleSubmit","fail_err","reset","email","e","keyCode","preventDefault","validate","values","errors","regExp","RegExp","username","test","form","enableReinitialize","mapStateToProps","users","error","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { Field, reduxForm } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport DialogComponent from \"../../HelperComponents/DialogComponent/DialogComponent\";\nimport FormControl from '@material-ui/core/FormControl';\nimport SelectComponent from '../../HelperComponents/SelectComponent/SelectComponent';\nimport RenderField from \"../../HelperComponents/RenderField/RenderField\";\nimport {patchUser, getUsersList, resetErrorUsers} from \"../../../actions/UserActions\";\n\n\nclass EditDialog extends Component {\n\n        state = {\n            role: [\n                {label:\n                        <div className=\"status\">\n                            <div>Admin</div>\n                        </div>\n                    , value: \"admin\"},\n                {label:\n                        <div className=\"status\">\n                            <div>User</div>\n                        </div>\n                    ,value: \"user\"},\n            ],\n            noErrors: false\n        };\n\n\n    handleChange = name => event => {\n        // const status = { status: event.value }\n        this.setState({ [name]: event });\n    };\n\n    submitForm = (data) => {\n        const { patchUser, getUsersList, toggler, initialValues } = this.props;\n        const { status } = this.state;\n        let obj = { ...data, role: status.value };\n        patchUser(initialValues.id, obj).then(res => {\n            if(res.payload && res.payload.status && res.payload.status === 200) {\n                getUsersList();\n                toggler()\n            }\n        })\n    };\n\n    defaultStatus = () => {\n        this.setState({status: null, noErrors: true});\n        this.props.resetErrorUsers();\n    };\n\n    render(){\n        const { role, status } = this.state;\n        const { toggler, state, handleSubmit, fail_err, initialValues, reset } = this.props;\n\n        return (\n            <DialogComponent\n                open={state}\n                onClose={() => {toggler(); this.defaultStatus()}}\n            >\n                    <div className=\"edit_dialog_user\">\n                        <form onSubmit={handleSubmit(this.submitForm)}>\n                        <div className=\"title\">\n                            <span>Edit user</span>\n                        </div>\n                        <div className=\"block_edit_field\">\n                            <span className='span'>Name</span>\n                            <Field\n                                name=\"username\"\n                                type=\"text\"\n                                component={RenderField}\n                                placeholder=\"Type here…\"\n                                className='input'\n                            />\n                        </div>\n\n                        <div className=\"block_edit_field_select\">\n                            <div>\n                                <span>Email</span>\n                                <Field\n                                    name=\"email\"\n                                    type=\"text\"\n                                    component={RenderField}\n                                    placeholder=\"Type here…\"\n                                    className='input'\n                                />\n                                <span className='back_error add'>{!!fail_err && fail_err.email}</span>\n\n                            </div>\n                            <div>\n                                <span>Role</span>\n                                <FormControl className=\"select_wrapper\">\n                                    <SelectComponent\n                                        value={status}\n                                        options={role}\n                                        // loading={!isArray(projects_list)}\n                                        change={this.handleChange('status', )}\n                                        isClearable=\"false\"\n                                        isSearchable = {false}\n                                        onKeyDown={(e) => (e.keyCode === 13 ? e.preventDefault() : false)}\n                                    />\n                                </FormControl>\n                                <span className='back_error role'>{!!fail_err&& fail_err.role}</span>\n                            </div>\n\n\n                        </div>\n\n                        <div className=\"btn_wrapper\">\n                            <button className=\"cancel_btn\" onClick={(e) => {e.preventDefault(); toggler(); reset('EditDialog'); this.defaultStatus()}}>Cancel</button>\n                            <button className=\"blue_btn\" disabled={!status}>save</button>\n                        </div>\n                        </form>\n                    </div>\n\n            </DialogComponent>\n\n\n        );\n    }\n}\n\n\nexport const validate = values => {\n    const errors = {};\n    const regExp = new RegExp(/^([A-Za-z '.-]+){1}$/g);\n\n    if (!values.username) {\n        errors.username = 'Required'\n    } else if (!regExp.test(values.username)) {\n        errors.username = 'Invalid name'\n    }\n    if (!values.email) {\n        errors.email = 'Required'\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,5}$/i.test(values.email)) {\n        errors.email = 'Invalid email'\n    }\n\n    return errors\n};\n\nEditDialog = reduxForm({\n    form: 'EditDialog',\n    validate,\n    enableReinitialize: true\n})(EditDialog);\n\nfunction mapStateToProps(state, props) {\n    return{\n        fail_err: state.users.error,\n        // initialValues: {\n        //     email: (props.userData && props.userData.email) || ''\n        // }\n    }\n}\nfunction mapDispatchToProps(dispatch) {\n    return bindActionCreators({\n        patchUser,\n        getUsersList,\n        resetErrorUsers\n    }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditDialog);\n"]},"metadata":{},"sourceType":"module"}