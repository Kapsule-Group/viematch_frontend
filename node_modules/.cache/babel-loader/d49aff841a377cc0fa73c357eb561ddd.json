{"ast":null,"code":"import _classCallCheck from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/src/components/Auth/PasswordRecovery/ThirdStep/ThirdStep.jsx\";\nimport React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport RenderField from \"../../../HelperComponents/RenderField/RenderField\";\nimport DefaultButton from '../../../Buttons/DefaultButton/DefaultButton';\nimport { postPasswordApprove } from '../../../../actions/authActions';\n\nvar ThirdStep = /*#__PURE__*/function (_Component) {\n  _inherits(ThirdStep, _Component);\n\n  function ThirdStep() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ThirdStep);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ThirdStep)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: false\n    };\n\n    _this.submitForm = function (data) {\n      var _this$props = _this.props,\n          postPasswordApprove = _this$props.postPasswordApprove,\n          search = _this$props.location.search,\n          history = _this$props.history;\n\n      _this.setState({\n        loading: true\n      });\n\n      var params = new URLSearchParams(search.substring(1));\n      var obj = {\n        security_token: params.get('security_token'),\n        password: data.password,\n        password_check: data.password_check\n      };\n      postPasswordApprove(obj).then(function (res) {\n        if (res.payload && res.payload.status && res.payload.status === 200) {\n          _this.setState({\n            loading: false\n          });\n\n          history.push(\"/auth/password-recovery/fourth-step/\");\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ThirdStep, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          handleSubmit = _this$props2.handleSubmit,\n          submitting = _this$props2.submitting,\n          pristine = _this$props2.pristine,\n          valid = _this$props2.valid,\n          security_token = _this$props2.security_token;\n      var loading = this.state.loading;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit(this.submitForm),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"auth-block_head\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 17\n        }\n      }, \"Password change\"), /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"auth-block_descriptions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }\n      }, \"Enter and confirm your new password\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block_field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }\n      }, \"New password\"), /*#__PURE__*/React.createElement(Field, {\n        name: \"password\",\n        type: \"password\",\n        component: RenderField,\n        placeholder: \"Type here\\u2026\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block_field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }\n      }, \"Confirm password\"), /*#__PURE__*/React.createElement(Field, {\n        name: \"password_check\",\n        type: \"password\",\n        component: RenderField,\n        placeholder: \"Type here\\u2026\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"auth_btn_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(DefaultButton, {\n        variant: \"contained\",\n        disabled: submitting || pristine || !valid,\n        loading: loading,\n        formAction: true,\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }\n      }, \"Next\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"back_error third\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      }, !!security_token && security_token.security_token));\n    }\n  }]);\n\n  return ThirdStep;\n}(Component);\n\nvar validate = function validate(values) {\n  var errors = {};\n\n  if (!values.password) {\n    errors.password = 'Required';\n  } else if (values.password.length < 8) {\n    errors.password = 'Must be 8 characters or more';\n  }\n\n  if (!values.password_check) {\n    errors.password_check = 'Required';\n  } else if (values.password_check !== values.password) {\n    errors.password_check = 'This password does not match the password below';\n  }\n\n  return errors;\n};\n\nThirdStep = reduxForm({\n  form: 'ThirdStepForm',\n  validate: validate\n})(ThirdStep);\n\nfunction mapStateToProps(state, props) {\n  return {\n    security_token: state.auth.error\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    postPasswordApprove: postPasswordApprove\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ThirdStep);","map":{"version":3,"sources":["/home/mydev/viebeg/backend/viebeg_backend2/4Com-viebeg-frontend-2089674220ab-2/src/components/Auth/PasswordRecovery/ThirdStep/ThirdStep.jsx"],"names":["React","Component","Field","reduxForm","connect","bindActionCreators","RenderField","DefaultButton","postPasswordApprove","ThirdStep","state","loading","submitForm","data","props","search","location","history","setState","params","URLSearchParams","substring","obj","security_token","get","password","password_check","then","res","payload","status","push","handleSubmit","submitting","pristine","valid","validate","values","errors","length","form","mapStateToProps","auth","error","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport {connect} from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport RenderField from \"../../../HelperComponents/RenderField/RenderField\";\nimport DefaultButton from '../../../Buttons/DefaultButton/DefaultButton';\nimport { postPasswordApprove } from '../../../../actions/authActions';\n\n\nclass ThirdStep extends Component {\n\n    state = {\n        loading: false,\n    };\n\n    submitForm = (data) => {\n        const { postPasswordApprove, location:{search}, history } = this.props;\n        this.setState({loading: true});\n        let params = new URLSearchParams(search.substring(1));\n        let obj = {\n            security_token: params.get('security_token'),\n            password: data.password,\n            password_check: data.password_check\n        };\n        postPasswordApprove(obj).then(res => {\n            if(res.payload && res.payload.status && res.payload.status === 200) {\n                this.setState({loading: false});\n                history.push(`/auth/password-recovery/fourth-step/`)\n            }\n        })\n    };\n\n    render(){\n        const {handleSubmit, submitting, pristine, valid, security_token } = this.props;\n        const { loading } = this.state;\n        return (\n            <form onSubmit={handleSubmit(this.submitForm)}>\n                <h3 className=\"auth-block_head\">Password change</h3>\n                <h3 className=\"auth-block_descriptions\">Enter and confirm your new password</h3>\n                <div className=\"block_field\">\n                    <span>New password</span>\n                    <Field name=\"password\" type=\"password\" component={RenderField} placeholder=\"Type here…\"/>\n                </div>\n                <div className=\"block_field\">\n                    <span>Confirm password</span>\n                    <Field name=\"password_check\" type=\"password\" component={RenderField} placeholder=\"Type here…\"/>\n                </div>\n                <div className=\"auth_btn_wrapper\">\n                    <DefaultButton\n                        variant=\"contained\"\n                        disabled={submitting || pristine || !valid}\n                        loading={loading}\n                        formAction\n                        type=\"submit\"\n                    >\n                        Next\n                    </DefaultButton>\n                </div>\n                <span className='back_error third'>{!!security_token && security_token.security_token}</span>\n            </form>\n        );\n    }\n}\n\nconst validate = values => {\n    const errors = {};\n    if (!values.password) {\n        errors.password = 'Required'\n    } else if (values.password.length < 8) {\n        errors.password = 'Must be 8 characters or more'\n    }\n    if (!values.password_check) {\n        errors.password_check = 'Required'\n    } else if (values.password_check !== values.password) {\n        errors.password_check = 'This password does not match the password below'\n    }\n    return errors\n};\n\nThirdStep = reduxForm({\n    form: 'ThirdStepForm',\n    validate\n})(ThirdStep);\n\nfunction  mapStateToProps(state, props) {\n    return{\n        security_token: state.auth.error,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return bindActionCreators({\n        postPasswordApprove\n    }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ThirdStep);"]},"metadata":{},"sourceType":"module"}